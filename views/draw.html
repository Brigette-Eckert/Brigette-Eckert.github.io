<canvas	width="600" height="400">
	
</canvas>
	<div class="controls">
		<ul>
			<li class="red color-selected"></li>
			<li class="blue"></li>
			<li class="yellow"></li>
		</ul>

		<div class="drawing-buttons text-center"> 
		<paper-button raised primary class="app-btn" id="revealColorSelect">
		New Color
		</paper-button>
		<div id="colorSelect">
			<span id="newColor"></span>
			<div class="sliders">
				<p>
					<label for="red">Red</label>
					<input id="red" name="red" type="range" min=0 max=255 value=0>
				</p>
				<p>
					<label for="green">Green</label>
					<input id="green" name="green" type="range" min=0 max=255 value=0>
				</p>
				<p>
					<label for="blue">Blue</label>
					<input id="blue" name="blue" type="range" min=0 max=255 value=0>
				</p>
			</div>
			<div>
			<paper-button raised primary class="app-btn" id="addNewColor">Add Color</paper-button>
			</div>
			<div>
		</div>
	</div>

<script>
var color =$(".color-selected").css("background-color");
var $canvas = $("canvas"); 
var context = $canvas[0].getContext("2d");
var lastEvent;
var mouseDown = false;

console.log("test")
//when clicking on control list items 
$("body").on("click", ".controls li", function() {
	console.log("click")
	//deselect sibling elements
	$(this).siblings().removeClass("color-selected");
	// select clicked elements
	$(this).addClass("color-selected");
	//cache current color
	color =$(this).css("background-color")
});


//when new color button is clicked		
$("#revealColorSelect").click(function() {
//show or hide color select
	changeColor();
	$("#colorSelect").toggle();
});
	
	function changeColor() {
		//update the new color span
		var r = $("#red").val();
		var g = $("#green").val();
		var b = $("#blue").val();

		$("#newColor").css("background-color", "rgb(" + r + "," + g + "," + b + ")");

	}

		//when color sliders change 
		$("input[type=range]").change(changeColor);

	//when add color is pressed
	$("#addNewColor").click(function() {
			//append the color to the controls ul
		var $newColor = $("<li></li>");
		$newColor.css("background-color", $("#newColor").css("background-color"));
		$(".controls ul").append($newColor);
			//select the new color
			$newColor.click();
	});

	$canvas.mousedown(function(e){
		lastEvent = e;
		mouseDown = true;
	}).mousemove(function(e) {
		//draw lines
		if(mouseDown) {
		context.beginPath();
		context.moveTo(lastEvent.offsetX, lastEvent.offsetY);
		context.lineTo(e.offsetX, e.offsetY);
		context.strokeStyle = color;
		context.stroke();
		lastEvent = e;
		}
	}).mouseup(function() {
		mouseDown= false; 
	}).mouseleave(function(){
		$canvas.mouseup();
	});


	//on mouse events on the canvas

	</script>